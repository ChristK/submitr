<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating a `{learnr}` tutorial with event logging via `{submitr}` • submitr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating a `{learnr}` tutorial with event logging via `{submitr}`">
<meta property="og:description" content="submitr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">submitr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/using.html">Creating a `{learnr}` tutorial with event logging via `{submitr}`</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../tutorials/Testing.html">Does login work?</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="using_files/header-attrs-2.2/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating a <code>{learnr}</code> tutorial with event logging via <code>{submitr}</code>
</h1>
            
      
      
      <div class="hidden name"><code>using.Rmd</code></div>

    </div>

    
    
<p>The <code>{learnr}</code> package provides facilities for writing interactive R tutorials. <code>{submitr}</code> extends <code>{learnr}</code> so that tutorials can log student interaction. This can be useful for monitoring the use of a tutorial, looking for patterns in student answers, or assigning a grade to students.</p>
<p>This vignette is oriented toward authors of <code>{learnr}</code> tutorials.</p>
<div id="before-we-get-started" class="section level2">
<h2 class="hasAnchor">
<a href="#before-we-get-started" class="anchor"></a>Before we get started</h2>
<p>If you are planning on logging to Google Sheets, you will need the <code>googlesheets4</code> package. While this is available from CRAN, as of the date of writing the CRAN version is obsolete. So make sure to install <code>googlesheets4</code> from its repository on GitHub using the command (in your R console)</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"tidyverse/googlesheets4"</span>)</pre></body></html></div>
</div>
<div id="a-minimal-example" class="section level2">
<h2 class="hasAnchor">
<a href="#a-minimal-example" class="anchor"></a>A minimal example</h2>
<p>The file <code>"minimal-example.Rmd"</code> is a short example of a <code>{learnr}</code> tutorial that illustrates the essentials of writing a tutorial using <code>{submitr}</code>.</p>
<p>You may want to start by running the tutorial from the command line:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="kw pkg">learnr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/learnr/man/run_tutorial.html">run_tutorial</a></span>(<span class="st">"minimal"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"submitr"</span>)</pre></body></html></div>
<p>Each page of the tutorial is laid out in the usual manner. By default, <code>{learnr}</code> puts a table of contents in a left column. <code>{submitr}</code> adds login ID and Password fields at the top of the page. For the minimal example the ID/Password pair “Anne/demo” can be used. An event will be logged whenever you perform a “submit” or “run” action or watch the video.</p>
<div class="figure">
<img src="images/minimal-first-page.png" alt="Snapshot of the minimal tutorial at start-up" width="80%"><p class="caption">
Snapshot of the minimal tutorial at start-up
</p>
</div>
<p>You can explore the document and its action better if you create your own copy to run directly. To do this, copy the <code>.Rmd</code> source file to a new file that you can edit. To illustrate, we’ll call the new file <code>minimal.Rmd</code>. Make the copy with this command:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.copy</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"tutorials/Minimal/minimal.Rmd"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"submitr"</span>),
  <span class="st">"./minimal.Rmd"</span>)</pre></body></html></div>
<p>Let’s consider the various components of <code>minimal.Rmd</code>.</p>
<div id="the-yaml-header" class="section level3">
<h3 class="hasAnchor">
<a href="#the-yaml-header" class="anchor"></a>The YAML header</h3>
<p>As with all <code>{learnr}</code> tutorials, the source document starts with a YAML header.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1"></a><span class="pp">---</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"A Minimal `{submitr}` Example"</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> learnr::tutorial</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="fu">runtime</span><span class="kw">:</span><span class="at"> shiny_prerendered</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="fu">tutorial</span><span class="kw">:</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="at">  </span><span class="fu">id</span><span class="kw">:</span><span class="at"> </span><span class="st">"minimal-example"</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="at">  </span><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.5</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="pp">---</span></span></code></pre></div>
<p>Note the <code>tutorial:</code> section and its fields <code>id:</code> and <code>version:</code>. You will want to set the <code>id:</code> to something unique for each document so that the event logging system can report which document a submission comes from.</p>
</div>
<div id="the-setup-chunk" class="section level3">
<h3 class="hasAnchor">
<a href="#the-setup-chunk" class="anchor"></a>The <code>setup</code> chunk</h3>
<pre><code>```{r setup, include=FALSE}
library(learnr)
library(submitr)
knitr::opts_chunk$set(echo = FALSE)
learnr::tutorial_options(
  exercise.timelimit = 60, 
  exercise.checker = submitr::null_code_checker)
```</code></pre>
<p>You can put any additional content you need in the <code>setup</code> chunk, but make sure to load both the <code>{learnr}</code> and <code>{submitr}</code> packages.</p>
<p>The <code><a href="https://rdrr.io/pkg/learnr/man/tutorial_options.html">learnr::tutorial_options()</a></code> function is being used to set the exercise checker to be used when processing user code submissions. It’s not mandatory to do this. The <code>{gradethis}</code> package provides facilities for such code checking. The <code><a href="../reference/null_code_checker.html">submitr::null_code_checker</a></code> is just a placeholder that displays a reminder that no genuine checking is being done. To use the <code>{gradethis}</code> checker, replace <code><a href="../reference/null_code_checker.html">submitr::null_code_checker</a></code> with <code><a href="https://rdrr.io/pkg/gradethis/man/grade_learnr.html">gradethis::grade_learnr</a></code>.</p>
</div>
<div id="login-controls" class="section level3">
<h3 class="hasAnchor">
<a href="#login-controls" class="anchor"></a>Login controls</h3>
<p>Each <code>{submitr}</code> document contains login authentication controls. These are <code>{shiny}</code> components predefined by the <code><a href="../reference/login_controls.html">submitr::login_controls()</a></code> function.</p>
<pre><code>```{r}
submitr::login_controls()
```</code></pre>
<p>By putting the login controls before the first section heading, you ensure that they will be visible on <em>each</em> page of the tutorial. This can be helpful to the user, giving a constant reminder of whether she is logged in.</p>
</div>
<div id="setting-logging-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-logging-parameters" class="anchor"></a>Setting logging parameters</h3>
<p>The final <code>{submitr}</code>-specific chunk sets the location of the event log, passwords for user authentication, and so on.</p>
<pre><code>```{r context="server", echo = FALSE}
options(tutorial.storage = "none") # for learnr
vfun &lt;- submitr::make_basic_validator(NULL, "hello")
storage_actions &lt;- submitr::record_local("./minimal_submissions.csv")
submitr::shiny_logic(input, output, session, vfun,
                     storage_actions)
```</code></pre>
<p>Let’s go through it line by line. First, note the chunk parameter <code>context="server"</code>. <em>This is essential for the login controls to be effective.</em> Chunks with <code>context="server"</code> are the means by which additional <code>{shiny}</code> server components, such as those for the login-controls, will be active while the tutorial is being run.</p>
<ol style="list-style-type: decimal">
<li><p><code><a href="https://rdrr.io/r/base/options.html">options(tutorial.storage = "none")</a></code>. By default, <code>{learnr}</code> bookmarks previous user entries so that they appear in the document on startup. This line turns off that feature so that the previous user ID and password are not filled in at startup. [At some point in the future it would be helpful to modify <code>{learnr}</code> to disable the bookmarking automatically for login controls and allow the document author to set the bookmarking policy as desired for the other components of the document.]</p></li>
<li><p><code>vfun &lt;- make_basic_validator(name, secret)</code>. All of the handling of credentials and authorization (if needed) to write to the logging database is handled by a single, user-provided function accessed <em>via</em> the name <code>vfun</code>. This will be described in detail in another section. <code><a href="../reference/make_basic_validator.html">make_basic_validator()</a></code> creates on such credential-handling function that is extremely simple. The first argument can be the name of a file containing login ids and passwords. Here it is set to <code>NULL</code> to help people getting started writing with <code>{submitr}</code>. The <code>NULL</code> directs <code>{submitr}</code> to use an example credential file distributed with the package. See <code><a href="https://rdrr.io/r/base/system.file.html">system.file("credentials-example.csv", package = "submitr")</a></code>. One of the credentials contained in <code>credentials-example.csv</code> is “January”/“snow”. You can look at the file to see others. <strong>NOTE: You will certainly want to create and use your own credentials file.</strong></p></li>
</ol>
<p>The second argument to <code><a href="../reference/make_basic_validator.html">make_basic_validator()</a></code> is a character string to be used as a password for the <code>instructor</code> account. This account is used to download the accumulated submissions for grading or other purposes.</p>
<ol start="3" style="list-style-type: decimal">
<li><p><code>storage_actions</code> is the name holding information about the place where logged events will be stored. We’ll defer details to a later section. To make starting out with <code>{submitr}</code> easier, we are using <em>local storage</em> of submissions. A mock submissions storage file has been included along with the .Rmd sources for minimal example. This is fine for initial playing, but once you are working with your own .Rmd file, you will want to create a genuine file for storage. You can call this what you will. Typically, for local storage that file is placed in the same directory as the .Rmd sources for the tutorial it serves.</p></li>
<li><p><code>submitr::shiny_logic()</code> implements the logic needed to connect the login controls to the rest of the logging system. The arguments must be named exactly as shown: <code>input</code>, <code>output</code> and <code>session</code> are created by <code>{shiny}</code> at runtime.</p></li>
</ol>
</div>
</div>
<div id="local-storage" class="section level2">
<h2 class="hasAnchor">
<a href="#local-storage" class="anchor"></a>Local storage</h2>
<p>Local storage is very easy to use and requires only the creation of the csv file described in item (3) of the previous section. It can be very effective if the tutorial is to be deployed on a shiny server that allows <em>persistent storage</em>. Regretably, <code>shinyapps.io</code> does not. But if you are using an institutional shiny server, you need look no further than local storage.</p>
<p>Downloading the storage file is extremely easy and works the same for all storage methods, local or not. Even people who do not have login credentials for the shiny server can access the storage file. To do this, open the tutorial in the same manner as would a student. Then give the login ID <code>instructor</code> and set the password to the second argument given to <code><a href="../reference/make_basic_validator.html">make_basic_validator()</a></code>. (In the example file, that’s “hello”.) This will cause a download link to appear in the tutorial. Pressing the link and using your browser’s interface for downloading files is all that’s needed.</p>
<p>When deploying a tutorial with local storage on a shiny server, the storage file itself is invisible to the student, as will be the information given to <code><a href="../reference/make_basic_validator.html">make_basic_validator()</a></code>.</p>
<p>There are two situations in which local storage will not be effective.</p>
<ol style="list-style-type: decimal">
<li>The tutorial is to be served by <code>shinyapps.io</code> or another server that does not have persistent storage.</li>
<li>The tutorial is to be distributed to students to run on their individual computer, for instance as part of a package. (See the <a href="https://rstudio.github.io/learnr/publishing.html">documentation on publishing tutorials</a> for options.)</li>
</ol>
<p>In these situations, storage must be arranged in another way, for example a database server. A simple server for data files is Google Sheets, which you can use with <code>submitr</code> as described in the next section.</p>
</div>
<div id="storage-with-google-sheets" class="section level2">
<h2 class="hasAnchor">
<a href="#storage-with-google-sheets" class="anchor"></a>Storage with Google Sheets</h2>
<p>Many readers will be familiar with Google Sheets. If not, you can find directions and tutorial by a simple web search. This is what you will need to accomplish storage with Google Sheets.</p>
<ol style="list-style-type: decimal">
<li><p>An account with Google. For security reasons, I encourage you to set up an account specifically and solely for the purpose of storing submissions. In the example to be given here, the account name is <code>statprep.annie@gmail.com</code>. But you do not have access to this account, so set up your own.</p></li>
<li><p>A blank spreadsheet file under the account in (1). Creating this file is a one-time operation which you can do using the browser interface to Google Sheets. You can name this file what you will, presumably a name that reminds you of the file’s purpose. But for the purpose of setting up your tutorial to use that file you will need the sheet’s ID. (You do not need to set up sharing for the file.)</p></li>
</ol>
<p>You will find the sheet’s ID in the URL for the file, which will look something like this:</p>
<p><code>https://docs.google.com/spreadsheets/d/d2rZlR_1wvkA-dqD3xHl-LX3Lu-Y/edit</code></p>
<p>The ID–sometimes called a “key”–for the sheet is the random-looking sequence of letters and numbers that is a components of the URL. In this example, the ID is <code>"d2rZlR_1wvkA-dqD3xHl-LX3Lu-Y"</code>, although a real ID is about twice as long.</p>
<p>You may want to use one Google Sheet for all your tutorials, or one sheet for the tutorials in each of your classes or course units, or even a separate sheet for each individual tutorial. Whichever you choose, you can access the submissions either directly through the Google Sheets browser interface or, conveniently, through the tutorial itself. Doing this involves logging in to the tutorial with user ID <code>instructor</code> and the password specified in the second argument to <code><a href="../reference/make_basic_validator.html">make_basic_validator()</a></code>. See the instructions in the section on <em>local storage</em>.</p>
<ol start="3" style="list-style-type: decimal">
<li>An access token for the account in (1). We’ll discuss this in the next section.</li>
</ol>
</div>
<div id="the-account-access-token" class="section level2">
<h2 class="hasAnchor">
<a href="#the-account-access-token" class="anchor"></a>The account access token</h2>
<p>Recall from part (2) of the previous section that you will have created a Google Sheet and copied out the ID. This is akin to the name of the spreadsheet file.</p>
<p>That file is contained within a Google account. (The one we’re using for this example is <code>statprep.annie@gmail.com</code>, but you will use an account you have created for this purpose.)</p>
<p>In order for <code>{submitr}</code> to be able to write to the spreadsheet, your tutorial needs to authenticate itself to Google. That is the role of the access token, which needs to be created once for the account you are using.</p>
<p>You create an access token by a short procedure that involves R commands which generate a browser page by which you log in to the account in a more-or-less standard way. The R commands will create a directory called <code>.secrets</code> and a file within that directory which is the token. Typically, the directory will be rooted in the same folder as the Rmd file for your tutorial. Each time you write a new <code>{submitr}</code> tutorial, you will have to replicate the account access token, which can be a simple matter of copying the <code>.secrets</code> directory to the folder containing the new tutorials Rmd file.</p>
</div>
<div id="specifying-google-sheets-storage-for-your-tutorial" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-google-sheets-storage-for-your-tutorial" class="anchor"></a>Specifying Google Sheets storage for your tutorial</h2>
<p>In the section on <em>local storage</em>, you saw this line used to set up the tutorial.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">storage_actions</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/record_local.html">record_local</a></span>(<span class="st">"./minimal_submissions.csv"</span>)</pre></body></html></div>
<p>To specify that Google Sheets storage be used, you replace those two lines with these:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">storage_actions</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="../reference/record_gs4.html">record_gs4</a></span>(
    <span class="kw">key</span> <span class="kw">=</span> <span class="st">"d2rZlR_1wvkA-dqD3xHl-LX3Lu-Y"</span>,
    <span class="kw">email</span> <span class="kw">=</span> <span class="st">"statprep.annie@gmail.com"</span>,
    <span class="no">vfun</span>
  )</pre></body></html></div>
<p>The <code>key=</code> argument is the ID for the Google Sheet file that will store the submissions. The <code>email=</code> argument is the account name which hosts the Google Sheet file. <code>vfun</code> is the validator function created earlier in the chunk.</p>
<p>In creating <code>storage_actions</code>, the <code><a href="../reference/record_gs4.html">record_gs4()</a></code> function knows to access the account access token which you will created and stored in the <code>.secrets</code> folder associated with your Rmd tutorial source file.</p>
</div>
<div id="creating-the--secrets-directory-containing-an-account-access-token" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-the--secrets-directory-containing-an-account-access-token" class="anchor"></a>Creating the <code>.secrets</code> directory containing an account access token</h2>
<p>This is something you need to do once, from the console.</p>
<ol style="list-style-type: decimal">
<li><p>Use <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> in R to navigate to the folder with your tutorial’s Rmd file. (Apologies to Jenny Bryan who emphasizes that this is in general a bad practice and promises to set on fire the computer of anyone who does it. Have a fire extinguisher available just in case!)</p></li>
<li><p>Give the following commands in the R console</p></li>
</ol>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="kw">gargle_oauth_cache</span> <span class="kw">=</span> <span class="st">".secrets"</span>)
<span class="kw pkg">googledrive</span><span class="kw ns">::</span><span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_auth.html">drive_auth</a></span>()</pre></body></html></div>
<p>In response, Google will ask for permissions …. Give them for the Google account in which you created the submissions storage sheet.</p>
<ol start="3" style="list-style-type: decimal">
<li>Give the additional R command</li>
</ol>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="kw pkg">googlesheets4</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/googlesheets4/man/gs4_auth.html">gs4_auth</a></span>(
  <span class="kw">token</span> <span class="kw">=</span> <span class="kw pkg">googledrive</span><span class="kw ns">::</span><span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_token.html">drive_token</a></span>())</pre></body></html></div>
<p>This process will create a folder named <code>.secrets</code> in the current R working directory (which will be where your tutorial’s Rmd lives). That folder will have a file whose name ends in the google email address for the account in which the submissions storage sheet was created. That is the account authorization token.</p>
<p>Note that if you are storing your <code>{submitr}</code> tutorial in a public place, such as a public GitHub repository, you will want to tell git to “ignore” the <code>.secrets</code> directory.</p>
<p>It can be helpful when writing multiple tutorials to have the account authorization token stored in a central place so that all your tutorials can use it. I have a working but primitive prototype of this and will be happy to describe it to potential authors on request.</p>
</div>
<div id="deploying-your-app" class="section level2">
<h2 class="hasAnchor">
<a href="#deploying-your-app" class="anchor"></a>Deploying your app</h2>
<p>If your app is to be deployed to a server and you are using local storage for submissions, your security is already in place. This applies as well to deployment using Google Sheets storage on servers without persistent storage such as <code>shinyapps.io</code>. (But do take care not to give access to the <code>.secrets</code> folder via your git or other repository.)</p>
<p>If you want to deploy your tutorial in source form, for example as part of a package, and have users run the tutorial on their own systems, then you will need to give up some security. First, remember that you are supposed to set up a special-purpose Google account with no other files of value; you don’t want a security breach to give access to your general-purpose account.</p>
<p>Second, contact me about the primitive prototype mentioned in the previous section.</p>
</div>
<div id="interpreting-a-submissions-log" class="section level2">
<h2 class="hasAnchor">
<a href="#interpreting-a-submissions-log" class="anchor"></a>Interpreting a submissions log</h2>
<p><em>At some point</em> I will write software to generate reports from a log, then add a shiny app into this package for that purpose.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r">  <span class="fu">in_google_sheets</span>(
    <span class="st">"1w3fEld2rZlR_6FuzvkA-viOLBA5JdqD3xHl-LuLX3-Y"</span>,
    <span class="st">"statprep.annie@gmail.com"</span>,
    <span class="no">vfun</span>)</pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Daniel Kaplan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
